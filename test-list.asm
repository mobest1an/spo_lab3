[section ram]
INIT code_end_addr
CALL main
POP
HLT
sum:
PUSH 0
PUSH 0
LOAD_BP -4
LOAD_BP -2
SUM
SAVE_BP 1
RET 2
sub:
PUSH 0
PUSH 0
LOAD_BP -4
LOAD_BP -2
SUB
SAVE_BP 1
RET 2
mul:
PUSH 0
PUSH 0
LOAD_BP -4
LOAD_BP -2
MUL
SAVE_BP 1
RET 2
div:
PUSH 0
PUSH 0
LOAD_BP -4
LOAD_BP -2
DIV
SAVE_BP 1
RET 2
read_num:
PUSH 0
PUSH 0
PUSH 0
PUSH 0
PUSH 0
PUSH 0
PUSH 0
PUSH 0
PUSH 1
PUSH 0
SAVE_BP 5
PUSH 1
PUSH 1
SAVE_BP 7
label2:
PUSH 1
PUSH 1
JNZ label1
label4:
LOAD_BP 5
SAVE_BP 1
RET 0
label1:
LOAD_IN
SAVE_BP 3
LOAD_BP 3
PUSH 1
PUSH 13
EQ
JNZ label3
LOAD_BP 5
PUSH 1
PUSH 10
MUL
LOAD_BP 3
PUSH 1
PUSH 48
SUB
SUM
SAVE_BP 5
LOAD_BP 7
PUSH 1
PUSH 1
SUM
SAVE_BP 7
JMP label2
label3:
LOAD_IN
JMP label4
number_length:
PUSH 0
PUSH 0
PUSH 0
PUSH 0
PUSH 0
PUSH 0
PUSH 1
PUSH 1
SAVE_BP 5
LOAD_BP -2
PUSH 1
PUSH 10
DIV
SAVE_BP 3
label6:
LOAD_BP 3
PUSH 1
PUSH 0
NEQ
JNZ label5
LOAD_BP 5
SAVE_BP 1
RET 1
label5:
LOAD_BP 3
PUSH 1
PUSH 10
DIV
SAVE_BP 3
LOAD_BP 5
PUSH 1
PUSH 1
SUM
SAVE_BP 5
JMP label6
print_num:
PUSH 0
PUSH 0
PUSH 0
PUSH 0
PUSH 0
PUSH 0
PUSH 0
PUSH 0
LOAD_BP -2
SAVE_BP 3
LOAD_BP -2
CALL number_length
PUSH 1
PUSH 1
SUB
SAVE_BP 5
PUSH 1
PUSH 1
SAVE_BP 7
label10:
LOAD_BP 5
PUSH 1
PUSH 0
NEQ
JNZ label9
label8:
LOAD_BP 7
PUSH 1
PUSH 0
NEQ
JNZ label7
PUSH 1
PUSH 10
SAVE_OUT
PUSH 1
PUSH 13
SAVE_OUT
PUSH 1
PUSH 0
SAVE_BP 1
RET 1
label7:
LOAD_BP 3
LOAD_BP 7
DIV
PUSH 1
PUSH 48
SUM
SAVE_OUT
LOAD_BP 3
LOAD_BP 7
MOD
SAVE_BP 3
LOAD_BP 7
PUSH 1
PUSH 10
DIV
SAVE_BP 7
JMP label8
label9:
LOAD_BP 7
PUSH 1
PUSH 10
MUL
SAVE_BP 7
LOAD_BP 5
PUSH 1
PUSH 1
SUB
SAVE_BP 5
JMP label10
main:
PUSH 0
PUSH 0
PUSH 0
PUSH 0
PUSH 0
PUSH 0
PUSH 0
PUSH 0
PUSH 0
PUSH 0
label12:
PUSH 1
PUSH 1
JNZ label11
SAVE_BP 1
RET 0
label11:
CALL read_num
SAVE_BP 3
LOAD_IN
SAVE_BP 7
LOAD_IN
LOAD_IN
CALL read_num
SAVE_BP 5
LOAD_BP 7
PUSH 3
PUSH 43
EQ
JNZ label19
label20:
LOAD_BP 7
PUSH 3
PUSH 45
EQ
JNZ label17
label18:
LOAD_BP 7
PUSH 3
PUSH 42
EQ
JNZ label15
label16:
LOAD_BP 7
PUSH 3
PUSH 47
EQ
JNZ label13
label14:
LOAD_BP 9
CALL print_num
JMP label12
label13:
LOAD_BP 3
LOAD_BP 5
CALL div
SAVE_BP 9
JMP label14
label15:
LOAD_BP 3
LOAD_BP 5
CALL mul
SAVE_BP 9
JMP label16
label17:
LOAD_BP 3
LOAD_BP 5
CALL sub
SAVE_BP 9
JMP label18
label19:
LOAD_BP 3
LOAD_BP 5
CALL sum
SAVE_BP 9
JMP label20
code_end_addr:
